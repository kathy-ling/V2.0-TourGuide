$(function(){addAllScenics();getGuidesbyScenic();$("#panel2").hide();$("#panel1").show()});function changeTab1(){document.getElementById("OrderTab").className="selected";document.getElementById("ReleaseTab").className=""}function changeTab2(){if(vistPhone=="undefined"||vistPhone==openId){alert("您还未注册，请注册！");window.location.href="register.html"}else{window.location.href="releaseOrder.html"}}function orderGuide(a){if(vistPhone=="undefined"||vistPhone==openId){alert("您还未注册，请注册！");window.location.href="register.html"}else{window.location.href="isOrder.html?guidePhone="+a}}function screenButton(){if(!($("#chooseScenicName option:selected").val())){alert("请先选择景区")}else{$("#panel1").hide();$("#panel2").show()}}function getGuidesbyScenic(){$("#guideList").empty();var b=$("#chooseScenicName option:selected").val();if(b==""){b="null"}var a={scenicName:b,visitTime:"null",visitNum:"0"};getAvailableGuides(a)}function getAvailableGuides(a){var b=HOST+"/getAvailableGuides.do";$.ajax({type:"post",url:b,async:true,data:a,datatype:"JSON",error:function(){},success:function(c){if(jQuery.isEmptyObject(c)){alert("没有符合条件的讲解员")}addlist(c)}})}function addlist(a){$.each(a,function(b,j){var g=document.getElementById("guideList");var e=document.createElement("div");e.className="listItem";var f='<div class="head"><img onclick="guideDetailInfo('+j.phone+')" src='+HOST+j.image+' onerror="changeImage(this)"></div><div class="detailInfo"><div class="name"><span>'+j.name+"</span>";var d;var c='</div><div class="guideFee"><img class="leftIcon" src="img/4-6导游费图标.png"/><span class="spanText" >导游费：</span><span class="spanInfo1" >'+j.guideFee+'<span></div><div class="guideLevel"><img class="leftIcon" src="img/4-7导游级别图标.png"/><span class="spanText">导游级别:</span><span class="spanInfo">'+j.guideLevel+'</span></div><div class="guideNum"><img class="leftIcon" src="img/4-8接待人次图标.png"/><span class="spanText">接待人次:</span><span class="spanInfo">'+j.historyTimes+'</span></div></div><div class="isOrder"><button class="order" onclick="orderGuide('+j.phone+')">立即<br/>预约</button></div>';if(j.sex=="女"){d='<span class="GuideSexFemale">'+j.sex+"</span>"}else{d='<span class="GuideSexMale">'+j.sex+"</span>"}var h=f+d+c;e.innerHTML=h;g.appendChild(e)})}function changeImage(a){a.src="../web/img/1-2头像.png";a.onerror=null}function guideDetailInfo(a){window.location.href="guideDetailInfo.html?guidePhone="+a}function addAllScenics(){var a=HOST+"/getAllScenics.do";$.ajax({type:"post",url:a,async:true,datatype:"JSON",success:function(b){addSelect(b)}})}function addSelect(b){$.each(b,function(a,c){addOption(c.scenicName)})}function addOption(b){var c=document.getElementById("chooseScenicName");c.options.add(new Option(b,b))}function getAvailableGuidesWithSelector(g,b,a,f,c){$("#guideList").empty();var e=$("#chooseScenicName option:selected").val();data={scenicName:e,visitTime:g,visitNum:"0",sex:b,age:a,level:c,language:f};var d=HOST+"/getAvailableGuidesWithSelector.do";$.ajax({type:"post",url:d,async:true,data:data,datatype:"JSON",error:function(){},success:function(h){if(jQuery.isEmptyObject(h)){alert("没有符合条件的讲解员");return false}addlist(h)}})}function confirmOrder(){var c=$("input[name='radioDate']:checked").val();var b=$("#SelectTime").val();var d=$("input[name='sex']:checked").val();var a=$("input[name='age']:checked").val();var g=$("input[name='language']:checked").val();var e=$("#starLevel").raty("getScore");var f=c+" "+b;if(!c&&!b){alert("请选择游览日期和日期，否则系统将为您设置默认时间");f="null"}if(d==undefined){d="null"}if(a==undefined){a="null"}if(g==undefined){g="null"}getAvailableGuidesWithSelector(f,d,a,g,e);$("#panel2").hide();$("#panel1").show()};